/*
 * -------------------------------------------------
 *  Nextflow custom config file for running nf-core eager on data generated at the Francis Crick Institute
 *  contact: Alexandre Gilardet alexandre.gilardet@crick.ac.uk
 * -------------------------------------------------
 * nextflow run nf-core/eager -profile <profile>,crick -c crick.config 
 * (where <profile> is screening, production or external)
 */
 
 params {

   config_profile_name = 'nf-core/eager Crick screening, production & external profiles'

   config_profile_description = "Profiles for ressources fitting low & high coverage data generated at the Crick (screening & production respectively). Option for higher coverage external data."

}

profiles {
  screening {
    process {
      withName:bwa {
        cpus = 12
        memory = '15 GB'
        time = '6h'
      }
    }
  }
  production {
    process {
      withName:adapter_removal {
        time = '3d'
      }
      withName:fastp {
        time = '8h'
      }
      withName:bwa {
        cpus = 8
        memory = '56 GB'
        time = '3d'
      }
      withName:samtools_filter {
        time = '3d'
      }
      withName:dedup {
        cpus = 6
        memory = '20 GB'
        time = '3d'
      }
      withName:damageprofiler {
        memory = '64 GB'
        time = '3d'
        errorStrategy = { task.exitStatus in [1,143,137,104,134,139] ? 'retry' : 'finish' }
      }
    }  
  }
  external {
    process {
      withName:samtools_filter {
        cpus = 12
        memory = '72 GB'
      }
    }
  }
}
