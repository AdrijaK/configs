
params {
    config_profile_description = 'Biowulf nf-core config'
    config_profile_contact = 'staff@hpc.nih.gov'
    config_profile_url = 'https://hpc.nih.gov/apps/nextflow.html'
    clusterOptions = null
    igenomes_base = '/fdb/igenomes_nf/'
}

singularity {
    enabled = true
    autoMounts = true
    cacheDir = "/data/$USER/nxf_singularity_cache"
    envWhitelist='https_proxy,http_proxy,ftp_proxy,DISPLAY,SLURM_JOB_ID,SINGULARITY_BINDPATH'
}

env {
    SINGULARITY_CACHEDIR="/data/$USER/.singularity"
    PYTHONNOUSERSITE = 1
    OMP_NUM_THREADS = 1
    OPENBLAS_NUM_THREADS = 1
}

executor {
    name = 'slurm'
    queue = 'norm'
    queueSize = 200
    pollInterval = '2 min'
    queueStatInterval = '5 min'
    submitRateLimit = '6/1min'
    retry.maxAttempts = 1
    clusterOptions = ' --gres=lscratch:200 '
    scratch = '/lscratch/$SLURM_JOB_ID'
         }
         
process {
    executor = 'slurm'
    maxRetries = 1
    stageInMode = 'symlink'
    stageOutMode = 'rsync'
    resourceLimits = [ cpus: 128, memory: 499.GB, time: 240.h ]
    // for running pipeline on group sharing data directory, this can avoid inconsistent files timestamps
    cache = 'lenient'
}



